# درک، تحلیل، و بازطراحی سیستم با استفاده از الگوهای طراحی

## گام یک: تشخیص مسائل و زیر الگو ها

| ردیف | شرح زیر مسئله                                                                                                                    | نوع پترن پیشنهادی | شرح روش اعمال                                                                                                      | اسم کلاس های تغییر یافته                                                                               |
| ---- | -------------------------------------------------------------------------------------------------------------------------------- | ----------------- | ------------------------------------------------------------------------------------------------------------------ | ------------------------------------------------------------------------------------------------------ |
| 1    | آیا در جاهایی از سیستم رفتار وابسته به حالت دارید؟                                                                               | state             | با توجه به وضعیت فعلی درخواست، یکسری عملیات انجام شده و وضعیت آپدیت میشود.                                         | `interface TicketState`, `ResolvedState`,`NewState`, `InProgressState`, `ClosedState`, `AssignedState` |
| 2    | آیا در جاهایی از سیستم، کارهایی را دارید که میتواند به چند روش انجام شود؟                                                        | strategy          | برای پردازش درخواست و پاسخ دهی با توجه پارامتر های مختلف، از پترن استراتژی برای مشخص کردن الگوریتم استفاده میکنیم. | `TicketHandlerStrategy`, `GenericTicketHandler`, `BugTicketHandler`, `TicketHandlerFactory`, `Ticket`  |
| 3    | آیا در جاهایی از سیستم، نیازمند ایجاد آبجک تهایی پیچیده هستید که به صورت مرحله به مرحله و با یک الگوریتم مشخص<br>ساخته م یشوند ؟ | factory           | برای ایجاد آبجکت های پیجیده به جای استفاده از if و else های زیاد، از factory استفاده میکنیم.                       | `TicketHandlerStrategy`, `GenericTicketHandler`, `BugTicketHandler`, `TicketHandlerFactory`, `Ticket`  |
## class diagram
کنار فایل ها آپاود شده است .
## تحلیل شی گرا
<div>
<div dir="rtl">
- SOLID: قبل از بازطراحی، همه‌ی رفتارها داخل TicketService و با شرط‌های متعدد متمرکز بود (نقض SRP و OCP)، اما با استفاده از State و Strategy هر رفتار در کلاس جدا قرار گرفته و سیستم بدون تغییر کلاس‌های اصلی قابل توسعه شده است.
</div>

<br>
<div dir="rtl">
- PLK (Law of Demeter):قبلاً کلاس‌ها به جزئیات تصمیم‌گیری درباره‌ی وضعیت، نوع و کانال دسترسی مستقیم داشتند، ولی در طراحی جدید هر شی فقط با انتزاع مربوط به خودش تعامل می‌کند و وابستگی به جزئیات داخلی دیگر اجزا کاهش یافته است.
</div>

<br>
<div dir="rtl">
- CRP (Common Reuse Principle): در نسخه‌ی اولیه برای دوباره استفاده کردن یا تغییر رفتار باید به کل منطق شرطی وابسته می‌شدی، اما اکنون stateها و strategyها به صورت ماژولار و مستقل قابل استفاده و تغییر هستند و وابستگی‌های غیرضروری حذف شده‌اند.
</div>  
</div>

